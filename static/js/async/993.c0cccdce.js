"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["993"],{9619:function(e,s,n){n.r(s),n.d(s,{default:()=>c});var r=n(651),i=n(6971);function t(e){let s=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",pre:"pre",code:"code",h3:"h3",ul:"ul",li:"li"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"bubblesjsutils",children:["@bubblesjs/utils",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#bubblesjsutils",children:"#"})]}),"\n",(0,r.jsx)(s.p,{children:"提供基于 Axios 的请求封装，快速集成常见的请求场景。"}),"\n",(0,r.jsxs)(s.h2,{id:"安装",children:["安装",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#安装",children:"#"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"pnpm add @bubblesjs/utils axios\n"})}),"\n",(0,r.jsxs)(s.h2,{id:"快速使用",children:["快速使用",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#快速使用",children:"#"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"import { getRequest } from '@bubblesjs/utils'\n\nconst request = getRequest({\n  baseUrl: '/api',\n  timeout: 10000,\n  commonHeaders: {\n    Authorization: () => `Bearer ${localStorage.getItem('token') || ''}`,\n  },\n  successMessageFunc: (msg) => console.log(msg),\n  errorMessageFunc: (msg) => console.error(msg),\n  unAuthorizedResponseFunc: (msg) => console.warn('401', msg),\n  statusMap: { success: 200, unAuthorized: 401 },\n  codeMap: { success: [200], unAuthorized: [40101, 401] },\n  responseDataKey: 'data',\n  responseMessageKey: 'message',\n  isTransformResponse: true,\n  isShowSuccessMessage: false,\n})\n\n// 直接使用 request 即 axios 实例\nconst res = await request.get('/user')\n"})}),"\n",(0,r.jsxs)(s.h2,{id:"api",children:["API",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#api",children:"#"})]}),"\n",(0,r.jsxs)(s.h3,{id:"getrequestoption",children:["getRequest(option)",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#getrequestoption",children:"#"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"baseUrl: string 接口基础地址，默认 '/'"}),"\n",(0,r.jsx)(s.li,{children:"timeout: number 请求超时毫秒数，默认 0"}),"\n",(0,r.jsx)(s.li,{children:"commonHeaders: Record<string, string | () => string> 公共请求头"}),"\n",(0,r.jsx)(s.li,{children:"successMessageFunc: (message: string) => void 成功提示"}),"\n",(0,r.jsx)(s.li,{children:"errorMessageFunc: (message: string) => void 错误提示"}),"\n",(0,r.jsx)(s.li,{children:"unAuthorizedResponseFunc: (message: string) => void 未授权处理"}),"\n",(0,r.jsx)(s.li,{children:"statusMap: { success?: number; unAuthorized?: number }"}),"\n",(0,r.jsx)(s.li,{children:"codeMap: { success?: number[]; unAuthorized?: number[] }"}),"\n",(0,r.jsx)(s.li,{children:"responseDataKey: string 响应数据字段，默认 'data'"}),"\n",(0,r.jsx)(s.li,{children:"responseMessageKey: string 响应消息字段，默认 'message'"}),"\n",(0,r.jsx)(s.li,{children:"isTransformResponse: boolean 是否直接返回 data 数据，默认 true"}),"\n",(0,r.jsx)(s.li,{children:"isShowSuccessMessage: boolean 是否显示成功提示，默认 true"}),"\n"]}),"\n",(0,r.jsxs)(s.h3,{id:"高级自定义-axios-实例",children:["高级：自定义 Axios 实例",(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#高级自定义-axios-实例",children:"#"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"import { createRequest } from '@bubblesjs/utils/request/core/axios'\n\nconst axiosInstance = createRequest({\n  baseURL: '/api',\n  timeout: 8000,\n  requestInterceptor: (config) => {\n    // 自定义请求拦截\n    return config\n  },\n  responseInterceptor: (res) => {\n    // 自定义响应处理\n    return res\n  },\n})\n"})})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,i.ah)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}let c=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["zh%2Fpackages%2Futils.md"]={toc:[{text:"安装",id:"安装",depth:2},{text:"快速使用",id:"快速使用",depth:2},{text:"API",id:"api",depth:2},{text:"getRequest(option)",id:"getrequestoption",depth:3},{text:"高级：自定义 Axios 实例",id:"高级自定义-axios-实例",depth:3}],title:"@bubblesjs/utils",headingTitle:"@bubblesjs/utils",frontmatter:{}}}}]);